# Windows Installation Guide

This document provides instructions for installing and using the `umbral-pre-cgo` package on Windows.

## Quick Installation (Recommended)

### One Command Installation
```cmd
go get github.com/vlsilver/umbral/umbral-pre-cgo
```

The package will automatically download the required Windows libraries (`libumbral_pre.dll` and `libumbral_pre.lib`) from GitHub Releases.

## Manual Installation (If Auto-install Fails)

### Prerequisites

1. **Install Go**: Download from [https://golang.org/dl/](https://golang.org/dl/)
2. **Install Rust**: Download from [https://rustup.rs/](https://rustup.rs/)
3. **Install Windows Build Tools**:
   - **Visual Studio Build Tools** (recommended)
   - **MinGW-w64** (alternative)

### Manual Build Steps
```cmd
# Build Rust library for Windows
cd umbral-pre
cargo build --release --features bindings-c --target x86_64-pc-windows-msvc

# Create lib directory and copy libraries
cd ../umbral-pre-cgo
mkdir lib
copy ..\target\x86_64-pc-windows-msvc\release\umbral_pre.dll lib\libumbral_pre.dll
copy ..\target\x86_64-pc-windows-msvc\release\umbral_pre.lib lib\libumbral_pre.lib

# Install Go package
go get github.com/vlsilver/umbral/umbral-pre-cgo
```

## Using the Package

After building, you can use the package in your Go projects:

```go
package main

import (
    "fmt"
    "log"
    umbralprecgo "github.com/vlsilver/umbral/umbral-pre-cgo"
)

func main() {
    // Generate Ethereum key pairs
    delegatingPrivateKey, delegatingPublicKey, err := umbralprecgo.GenerateEthereumKeyPair()
    if err != nil {
        log.Fatal("Failed to generate delegating key pair:", err)
    }
    
    // Your code here...
    fmt.Println("Umbral Pre-Go is working on Windows!")
}
```

## Troubleshooting

### Error: "cannot find -lumbral_pre"
This error occurs when the Windows library files are missing. Solutions:
1. **Try auto-install first**: `go run github.com/vlsilver/umbral/install-libs.go`
2. **Manual build**: Follow the manual installation steps above
3. **Check file names**: Ensure files are named `libumbral_pre.dll` and `libumbral_pre.lib`

### Error: "gcc failed: exit status 1"
This usually means:
1. Missing Windows build tools (Visual Studio Build Tools or MinGW)
2. Incorrect PATH configuration
3. Missing Windows SDK

### Error: "No such file or directory"
Make sure you're running the build commands from the correct directory and that all paths are correct.

## GitHub Actions

Pre-built libraries are automatically generated by GitHub Actions for all platforms (Windows, macOS, Linux) when code is pushed to the main branch. You can download them from the [GitHub Releases](https://github.com/vlsilver/umbral/releases) page.

## Support

If you encounter issues:
1. Check the [GitHub Issues](https://github.com/vlsilver/umbral/issues) page
2. Try the auto-install method first
3. Fall back to manual installation if needed
